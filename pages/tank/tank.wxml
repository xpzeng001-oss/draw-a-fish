<view class="container">
  <!-- 统计面板 -->
  <view class="stats-panel">
    <view class="stat-item">
      <text class="stat-value">{{totalFish}}</text>
      <text class="stat-label">总鱼数</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{avgScore}}</text>
      <text class="stat-label">平均分</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{topScore}}</text>
      <text class="stat-label">最高分</text>
    </view>
  </view>

  <!-- 鱼列表 -->
  <scroll-view class="fish-list" scroll-y enhanced show-scrollbar="{{false}}">
    <view class="fish-card" wx:for="{{fishList}}" wx:key="id">
      <view class="rank-badge rank-{{index < 3 ? index + 1 : 'normal'}}">
        <text>{{index < 3 ? medals[index] : index + 1}}</text>
      </view>
      
      <!-- 鱼的预览 Canvas -->
      <view class="fish-preview">
        <canvas type="2d" id="fish-{{index}}" class="preview-canvas" style="width:100rpx;height:70rpx;"></canvas>
      </view>

      <view class="fish-info">
        <view class="fish-name">{{item.name || '无名小鱼'}}</view>
        <view class="fish-meta">
          <text class="fish-time">{{item.timeText}}</text>
        </view>
      </view>

      <view class="fish-score" style="color:{{item.score >= 70 ? '#2ecc71' : item.score >= 55 ? '#f39c12' : '#e74c3c'}}">
        <text class="score-num">{{item.score}}</text>
        <text class="score-unit">分</text>
      </view>

      <!-- 删除按钮 -->
      <view class="delete-btn" bindtap="deleteFish" data-index="{{index}}">
        <text>×</text>
      </view>
    </view>

    <view class="empty-state" wx:if="{{fishList.length === 0}}">
      <text class="empty-icon">🐟</text>
      <text class="empty-text">鱼缸里还没有鱼</text>
      <text class="empty-hint">去画一条吧！</text>
    </view>

    <view class="list-footer" wx:if="{{fishList.length > 0}}">
      <text>共 {{totalFish}} 条鱼</text>
    </view>
  </scroll-view>

  <!-- 底部操作 -->
  <view class="bottom-actions">
    <view class="btn-back" bindtap="goBack">
      <text>🐠 回到鱼缸</text>
    </view>
    <view class="btn-draw" bindtap="goToDraw">
      <text>✏️ 再画一条</text>
    </view>
  </view>
</view>
